let DEBUG_MODE,ValidationError,response;_bb1‍.x([["default",()=>_bb1‍.o]]);_bb1‍.w("../config",[["DEBUG_MODE",["DEBUG_MODE"],function(v){DEBUG_MODE=v}]]);_bb1‍.w("joi",[["ValidationError",["ValidationError"],function(v){ValidationError=v}]]);_bb1‍.w("express",[["response",["response"],function(v){response=v}]]);


const errorHandler = (err,req,res,next) =>{
    let statusCode = 500;
    let data = {
        message:'Internal server error',
        ...(DEBUG_MODE==='true' && {originalError: err.message})   
    }
    if(err instanceof ValidationError)
    {
        statusCode = 422;
        data = {
            message: err.message
        }
    }
    return res.status(statusCode).json(data);  
}

_bb1‍.d(errorHandler);